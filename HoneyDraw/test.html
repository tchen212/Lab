<html>
<head>
<title>OOP</title>
<script type="text/javascript">
	// 定义object的基类用于实现最基础的方法
	var object = {
		/**
		 * 判断是否为指定对象类型
		 * Class函数构建的类通过Type属性体现继承的父类，一直找到最顶端对象，如果没有则返回false
		 * @param aType {object} 指定类型
		 * @return {bool} 是否为指定类型
		 */
		isA:function(aType){
			var self = this;
			while(self){
				if(self == aType){
					return true;
				}
				self = self.Type;
			}
			return false;
		}
	};

	/**
	 * 创建类
	 * @param baseClass {object} 基类
	 * @param params {object} 构造参数
	 * @return {object} 构造的类
	 */
	var Class = function(baseClass,params){
		function _class(){
			this.Type = baseClass;
			for(param in params){
				this[param] = params[param];
			}
		}
		_class.prototype = baseClass;
		return new _class();
	}

	/**
	 * 创建类的实例对象
	 * 默认构造参数的Create方法为构造方法
	 * @param className {object} 类
	 * @param params {object} 构造参数
	 * @return {object} 类的实例对象
	 */
	var New = function(className,params){
		function _new(){
			this.Type = className;
			if("Create" in params){ 
				params.Create.apply(this,params)
			}
		}
		_new.prototype = className;
		return new _new();
	}

	// 动物类
	var Animal = Class(object,{
		"Create":function(name,age){
			this.name = name;
			this.age = age;
		},
		"Run":function(){
			alert(this.name+"is running...");
		}
	});

	// 狗类继承自动物类
	var Dog = Class(Animal,{
		"Create":function(name,age,color){
			Animal.Create.call(this,name,age);
			this.color = color;
		},
		"GetColor":function(){
			alert("my color is "+this.color);
		}
	})

	var cat = New(Animal,["sandy",2]);
	cat.Run();
	var laifu = New(Dog,["laifu",3,"black"]);
	laifu.Run();
	laifu.GetColor();

	document.write("cat is a animal ? "+cat.isA(Animal));
	document.write("<br/>");
	document.write("cat is a dog ? "+cat.isA(Dog));
	document.write("<br/>");
	document.write("laifu is a animal ? "+laifu.isA(Animal));
	document.write("<br/>");
	document.write("laifu is a dog ? "+laifu.isA(Dog));

</script>
</head>
<body></body>
</html>